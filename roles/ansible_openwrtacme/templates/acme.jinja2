# Configuration generated by Ansible
config acme
	option state_dir "{{ openwrt_acme_state_dir }}"
	option debug "{{ openwrt_acme_debug }}"
{% if openwrt_acme_account_email is defined %}
	option account_email "{{ openwrt_acme_account_email }}"
{% endif %}

{% for key, value in openwrt_acme_cert.items() %}
config cert "{{ key }}"
	option keylength "{{ value['keylength'] | default("4096", true) }}"
{% for domain in value['domains'] %}
	list domains "{{ domain }}"
{% endfor %}
	option validation_method "{{ value['validation_method'] }}"
{% if value['dns'] is defined %}
	option dns "{{ value['dns'] }}"
{% endif %}
{% if value['webroot'] is defined %}
	option webroot "{{ value['webroot'] }}"
{% endif %}
{% if value['credentials'] is defined %}
{% for creds in value['credentials'] %}
	list credentials '{{ creds }}'
{% endfor %}
{% endif %}
	option enabled "{{ value['enabled'] | default("1", true) }}"
	option use_staging "{{ value['use_staging'] | default("0", true) }}"
	option update_uhttpd "{{ value['update_uhttpd'] | default("1", true) }}"
{% endfor %}

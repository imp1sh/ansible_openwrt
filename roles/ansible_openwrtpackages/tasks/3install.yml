---
- name: Refresh opkg so packages will be found
  ansible.builtin.shell: opkg update
  when:
    - not openwrt_bmx7_runimagebuilder | default(false)
- name: Install packages
  community.general.opkg:
    name: "{{ openwrt_packages_install }}"
    state: present
    update_cache: true
  when:
    - openwrt_packages_install is defined
    - not openwrt_packages_runimagebuilder | default(false)
